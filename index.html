<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEO Analyzer MVP</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@300;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; max-width: 900px; margin: 40px auto; padding: 20px; background: #f0f4f8; color: #333; line-height: 1.6; }
        h1, h2, h3 { font-family: 'Montserrat', sans-serif; color: #007bff; }
        .steps { display: flex; justify-content: space-between; margin-bottom: 30px; }
        .step { flex: 1; text-align: center; padding: 10px; background: #e9ecef; border-radius: 5px; margin: 0 10px; font-family: 'Montserrat', sans-serif; }
        .step.active { background: #007bff; color: white; }
        .section { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; transition: transform 0.3s; }
        .section:hover { transform: translateY(-5px); }
        .sticky { position: sticky; top: 0; z-index: 10; background: #fff; border-bottom: 2px solid #007bff; }
        input[type="text"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px; font-family: 'Poppins', sans-serif; }
        button { padding: 12px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin: 10px 0; font-family: 'Montserrat', sans-serif; }
        button:hover { background: #0056b3; }
        .success { color: #28a745; font-weight: bold; }
        .error { color: #dc3545; font-weight: bold; }
        .warn { color: #ffc107; font-weight: bold; }
        .hidden { display: none; }
        .credits { position: absolute; top: 20px; right: 20px; font-weight: bold; font-family: 'Poppins', sans-serif; }
        .progress { text-align: center; margin: 10px 0; }
        .score-container { position: relative; background: linear-gradient(to right, #dc3545, #ffc107, #28a745); height: 20px; border-radius: 5px; overflow: hidden; margin: 10px 0; }
        .score-fill { background: transparent; height: 100%; transition: width 0.5s; }
        .average-tick { position: absolute; top: 0; bottom: 0; width: 2px; background: #333; left: 52%; }
        .average-label { position: absolute; top: 25px; left: 52%; transform: translateX(-50%); font-size: 12px; color: #333; }
        .urgent { background: #ffe5e5; padding: 15px; border-radius: 5px; margin: 20px 0; color: #dc3545; font-family: 'Poppins', sans-serif; }
    </style>
</head>
<body>
    <div class="credits">Credits: <span id="credits">0</span>*</div>
    <h1>AEO Analyzer</h1>
    
    <div class="steps">
        <div class="step" id="step1">1 Verify Website</div>
        <div class="step" id="step2">2 Choose Plan</div>
        <div class="step" id="step3">3 Get Results</div>
    </div>

    <div id="verifySection" class="section">
        <h2>We Need To Verify If Your Site Is Blocked Before You Can Proceed</h2>
        <p>Some websites have anti-bot protection that prevents automated analysis. We'll check your site's accessibility first to ensure you get the best experience.</p>
        <label for="urlInput">Enter Your Website URL</label>
        <input type="text" id="urlInput" placeholder="https://example.com" value="https://example.com">
        <p class="warn">Include http:// or https:// for best results.</p>
        <button onclick="checkCompatibility()">Check Website Compatibility</button>
        <div id="loading" class="progress hidden">Checking website accessibility...</div>
        <div id="verifyResult"></div>
    </div>

    <div id="planSection" class="section hidden">
        <h2>Choose Your Analysis Option</h2>
        <!-- Content will be populated based on verification -->
    </div>

    <div id="resultsSection" class="section hidden">
        <h2>Website Analyzed: <span id="analyzedUrl"></span></h2>
        <div class="score-container">
            <div class="score-fill" id="scoreFill"></div>
            <div class="average-tick"></div>
        </div>
        <div class="average-label">Average Score (52)</div>
        <h3>Overall AEO Score: <span id="overallScore">--</span></h3>
        <div class="section sticky">
            <h3>AEO Score Comparison</h3>
            <p>Your Score: <span id="yourScore">--</span></p>
            <p>Poor (0-40) | Average: 52 | Top 10%: 85 | Excellent (71-100)</p>
        </div>
        <div class="section">
            <h3>Content Structure</h3>
            <p id="contentStructure">--</p>
        </div>
        <div class="section">
            <h3>Technical SEO</h3>
            <p id="technicalSEO">--</p>
        </div>
        <div class="section">
            <h3>Authority & AI Signals</h3>
            <p id="authorityAI">--</p>
        </div>
        <div class="urgent" id="urgentMessage">
            <h3>ðŸš¨ URGENT BUT ACHIEVABLE!</h3>
            <p>Your website scored --/100, which means you have CRITICAL OPPORTUNITY WINDOWS that could skyrocket your AI search visibility by 200-400%!</p>
            <p>The good news? These are simple fixes that most competitors haven't discovered yet. Implement these recommendations this week and see results within 30 days.</p>
        </div>
        <h3>Prioritized Action Items</h3>
        <ul id="actionItems">
            <!-- Populated by JS -->
        </ul>
        <p>Credits Remaining: <span id="remainingCredits">9</span></p>
        <button onclick="analyzeAnother()">Analyze Another Website</button>
    </div>

    <div id="noCreditsSection" class="section hidden">
        <h2>ðŸš¨ You're Out of Analysis Credits!</h2>
        <p>You've used all your analysis credits. Purchase another package to continue analyzing websites and growing your AI search visibility!</p>
        <button onclick="refillCredits()">Refill Credits $9.99 (Get 10 more)</button>
    </div>

    <script>
        let credits = 0; // Start with 0 for MVP
        let currentUrl = '';
        document.getElementById('credits').textContent = credits;
        document.getElementById('step1').classList.add('active');

        async function checkCompatibility() {
            currentUrl = document.getElementById('urlInput').value.trim();
            if (!currentUrl) return showError('verifyResult', 'Please enter a URL.');

            if (!currentUrl.startsWith('http://') && !currentUrl.startsWith('https://')) currentUrl = 'https://' + currentUrl;

            document.getElementById('loading').classList.remove('hidden');
            const proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(currentUrl);

            try {
                const response = await fetch(proxyUrl);
                document.getElementById('loading').classList.add('hidden');

                if (response.ok) {
                    showSuccess('verifyResult', 'Great! Your Website Can Be Analyzed', 'Your site is accessible for instant automated analysis');
                    document.getElementById('planSection').innerHTML = `
                        <p>You can proceed with instant analysis:</p>
                        <h3>Automated Analysis $9.99</h3>
                        <p>Get 10 analysis credits for instant AEO scoring and recommendations</p>
                        <button onclick="proceedToAnalysis(true)">Get Instant Analysis</button>
                    `;
                } else {
                    showError('verifyResult', 'This website uses advanced security that prevents automated analysis.');
                    document.getElementById('planSection').innerHTML = `
                        <p>Choose your preferred option:</p>
                        <h3>Premium Manual Analysis $49</h3>
                        <p>Expert analysis with detailed PDF report delivered via email within 15-20 minutes</p>
                        <button onclick="proceedToAnalysis(false)">Get Expert Analysis</button>
                        <button onclick="tryDifferent()">Try Different Website</button>
                    `;
                }
                document.getElementById('verifySection').classList.add('hidden'); // Hide verify on progress
                document.getElementById('planSection').classList.remove('hidden');
                document.getElementById('step2').classList.add('active');
            } catch (error) {
                document.getElementById('loading').classList.add('hidden');
                showError('verifyResult', 'Error checking: ' + error.message);
            }
        }

        function showSuccess(id, title, message) {
            document.getElementById(id).innerHTML = `<p class="success">âœ… ${title}</p><p>${message}</p>`;
        }

        function showError(id, message) {
            document.getElementById(id).innerHTML = `<p class="error">${message}</p>`;
        }

        async function proceedToAnalysis(isAutomated) {
            if (credits <= 0) {
                document.getElementById('noCreditsSection').classList.remove('hidden');
                return;
            }

            // Simulate payment/credit use for MVP
            credits--;
            document.getElementById('credits').textContent = credits;
            document.getElementById('remainingCredits').textContent = credits;

            // Fetch HTML for analysis
            const proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(currentUrl);
            try {
                const response = await fetch(proxyUrl);
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');

                // Simulate AEO analysis (expand with more checks)
                const score = Math.floor(Math.random() * 100) + 1; // Random for MVP
                document.getElementById('analyzedUrl').textContent = currentUrl;
                document.getElementById('overallScore').textContent = score;
                document.getElementById('yourScore').textContent = score;
                document.getElementById('scoreFill').style.width = `${score}%`;
                document.getElementById('contentStructure').textContent = 'Analysis: ' + (doc.querySelectorAll('h1,h2,h3').length > 5 ? 'Good structure' : 'Needs more headings');
                document.getElementById('technicalSEO').textContent = 'Meta tags: ' + (doc.querySelector('meta[name="description"]') ? 'Present' : 'Missing');
                document.getElementById('authorityAI').textContent = 'Links: ' + doc.querySelectorAll('a').length + ' found';

                const items = ['Optimize meta tags', 'Add alt texts to images', 'Improve text/HTML ratio'];
                const ul = document.getElementById('actionItems');
                ul.innerHTML = '';
                items.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    ul.appendChild(li);
                });

                document.getElementById('urgentMessage').querySelector('p').textContent = `Your website scored ${score}/100, which means you have CRITICAL OPPORTUNITY WINDOWS that could skyrocket your AI search visibility by 200-400%!`;

                document.getElementById('planSection').classList.add('hidden'); // Hide plan on progress
                document.getElementById('resultsSection').classList.remove('hidden');
                document.getElementById('step3').classList.add('active');
            } catch (error) {
                showError('verifyResult', 'Analysis failed: ' + error.message);
            }
        }

        function tryDifferent() {
            document.getElementById('urlInput').value = '';
            document.getElementById('planSection').classList.add('hidden');
            document.getElementById('verifyResult').innerHTML = '';
            document.getElementById('verifySection').classList.remove('hidden'); // Show verify again
        }

        function analyzeAnother() {
            tryDifferent();
            document.getElementById('resultsSection').classList.add('hidden');
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step3').classList.remove('active');
        }

        function refillCredits() {
            // Simulate refill for MVP
            credits += 10;
            document.getElementById('credits').textContent = credits;
            document.getElementById('noCreditsSection').classList.add('hidden');
            alert('Credits refilled! (Simulated for MVP)');
        }
    </script>
</body>
</html>
